import { motion } from 'framer-motion';
import ThoughtBubble from './ThoughtBubble';
import thoughtsJson from '../data/thoughts.json';

// SVG path 데이터 (5개 영역 - 서로 겹치지 않게 배치)
const pathData = [
  {
    id: 'thought-1',
    // 왼쪽 상단 영역 (일)
    path: 'M 120 80 Q 140 60 175 65 Q 210 70 220 100 Q 225 130 200 145 Q 170 160 140 145 Q 110 125 120 80',
    centerX: 168,
    centerY: 110,
    floatDelay: 0,
  },
  {
    id: 'thought-2',
    // 오른쪽 상단 영역 (사람)
    path: 'M 250 55 Q 285 45 320 55 Q 355 70 360 105 Q 360 140 330 155 Q 295 165 260 150 Q 230 130 250 55',
    centerX: 305,
    centerY: 105,
    floatDelay: 0.5,
  },
  {
    id: 'thought-3',
    // 중앙 영역 (성장)
    path: 'M 170 170 Q 200 155 240 160 Q 280 165 295 195 Q 305 230 280 255 Q 245 275 205 265 Q 165 250 160 210 Q 155 180 170 170',
    centerX: 230,
    centerY: 215,
    floatDelay: 1,
  },
  {
    id: 'thought-4',
    // 오른쪽 중단 영역 (취미)
    path: 'M 320 170 Q 355 160 385 180 Q 410 205 405 240 Q 395 275 360 285 Q 320 290 300 260 Q 285 225 320 170',
    centerX: 355,
    centerY: 225,
    floatDelay: 1.5,
  },
  {
    id: 'thought-5',
    // 하단 중앙 영역 (감정)
    path: 'M 220 290 Q 260 275 300 285 Q 340 300 345 340 Q 345 380 305 395 Q 260 405 225 385 Q 195 360 200 320 Q 205 295 220 290',
    centerX: 275,
    centerY: 340,
    floatDelay: 2,
  },
];

// JSON 데이터와 path 데이터 병합
const thoughtsData = thoughtsJson.thoughts.map((thought, index) => ({
  ...thought,
  ...pathData[index],
}));

// 제공된 SVG의 얼굴 실루엣 path
const headSilhouettePath = `M284.226,0.167c-0.405-0.036-0.761,0.015-1.147,0.01c-0.025,0-0.051-0.01-0.076-0.01
  C168.636-3.796,48.425,62.669,58.814,191.272c0.041,0.521,0.17,0.982,0.264,1.467c-0.15,1.331-0.15,2.724,0.173,4.238
  c6.271,29.348-3.354,55.149-27.444,73.141c-1.104,0.822-1.95,1.767-2.689,2.752c-2.435,1.6-4.357,4.053-5.393,7.023
  c-4.519,12.969-1.086,26.172,9.278,35.195c1.708,1.482,3.687,2.493,5.746,3.036c6.69,3.697,13.685,6.154,20.949,7.871
  c-1.493,8.054-0.759,16.198,3.12,23.866c-7.243,14.117-2.435,29.691,11.865,38.191c0.807,0.482,1.612,0.843,2.404,1.122
  c2.427,2.89,2.661,7.531,1.767,11.995c-0.277,1.365-0.312,2.731-0.208,4.062c-0.063,1.209-0.025,2.438,0.208,3.677
  c3.77,19.773,20.66,30.691,39.986,31.042c1.041,0.021,2.001-0.087,2.907-0.27c0.894,0.041,1.831-0.01,2.798-0.167
  c31.037-5.033,66.375-2.22,78.033,31.869c2.331,6.81,8.559,9.12,14.14,8.221c1.881,1.412,4.357,2.214,7.478,1.996
  c56.241-3.931,111.987-12.101,167.83-19.596c1.976-0.265,3.687-0.904,5.164-1.809c6.77-2.112,12.238-9.688,7.866-17.854
  c-37.313-69.568,38.328-145.464,52.684-212.295c0.315-1.445,0.32-2.783,0.193-4.058C473.106,116.222,397.155,10.338,284.226,0.167z
  M434.112,221.092c-0.147,1.016-0.167,1.988-0.111,2.922c-15.595,71.509-83.984,140.64-56.909,215.515
  c-50.855,6.906-101.676,13.995-152.903,17.58c-0.363,0.025-0.68,0.122-1.028,0.178c-18.309-40.751-60.91-48.058-103.06-41.675
  c-0.421-0.051-0.812-0.143-1.264-0.152c-4.799-0.092-7.305-0.589-11.05-2.874c0.328,0.102-1.924-1.696-1.904-1.666
  c-0.322-0.325-0.523-0.518-0.67-0.645c0-0.097-0.129-0.386-0.602-1.153c-0.713-1.143-1.239-2.752-1.676-4.57
  c2.173-15.01-2.089-28.05-14.667-37.647c-1.011-0.767-2.143-1.198-3.313-1.483c-0.363-0.305-0.716-0.599-1.097-0.984
  c0.069,0.03,0.005-0.122-0.213-0.473c0-0.31-0.021-0.411-0.056-0.381c0.15-0.649,0.294-1.3,0.523-1.93
  c0.005-0.025,1.831-2.858,2.435-3.712c1.688-2.382,2.034-5.271,1.503-8.049c0.502-2.741,0.145-5.605-1.503-7.992
  c-4.633-6.713-3.722-12.426,0-19.484c5.33-10.101-4.271-19.321-12.776-18.377c-0.089-0.011-0.168-0.041-0.254-0.056
  c-8.628-1.138-16.968-3.662-24.445-8.13c-0.536-0.315-1.062-0.508-1.587-0.747c-0.374-0.543-0.721-1.097-1.034-1.67
  c-0.053-0.158-0.094-0.295-0.167-0.519c-0.061-0.284-0.104-0.472-0.145-0.655c-0.021-0.563-0.005-1.117,0.02-1.681
  c0.041-0.152,0.12-0.503,0.224-1.046c31.115-24.313,44.48-57.731,36.909-96.791c0.015-0.49,0.066-0.947,0.025-1.468
  C73.978,75.679,181.521,21.155,282.997,24.668c0.32,0.01,0.604-0.046,0.914-0.056c0.112,0.01,0.203,0.045,0.314,0.056
  C380.565,33.347,447.838,127.304,434.112,221.092z`;

const HeadSilhouette = ({ onThoughtClick }) => {
  return (
    <motion.svg
      viewBox="0 0 481.636 481.635"
      width="100%"
      height="100%"
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ duration: 1 }}
      style={{ maxWidth: '600px', maxHeight: '600px' }}
    >
      {/* 배경 그라데이션 정의 */}
      <defs>
        <linearGradient id="headGradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stopColor="#3d5a73" />
          <stop offset="100%" stopColor="#2c3e50" />
        </linearGradient>
      </defs>

      {/* 얼굴 실루엣 (배경, 인터랙션 없음) */}
      <motion.path
        d={headSilhouettePath}
        fill="url(#headGradient)"
        fillRule="evenodd"
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ duration: 1.5 }}
        style={{ pointerEvents: 'none' }}
      />

      {/* 생각 영역들 */}
      {thoughtsData.map((thought) => (
        <ThoughtBubble
          key={thought.id}
          id={thought.id}
          path={thought.path}
          color={thought.color}
          label={thought.label}
          floatDelay={thought.floatDelay}
          centerX={thought.centerX}
          centerY={thought.centerY}
          onClick={() => onThoughtClick(thought)}
        />
      ))}
    </motion.svg>
  );
};

export default HeadSilhouette;
